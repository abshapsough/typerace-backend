(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{113:function(e,t,a){e.exports=a.p+"static/media/btn_google.686f8efa.svg"},134:function(e,t,a){e.exports=a(191)},139:function(e,t,a){},169:function(e,t){},190:function(e,t,a){},191:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(11),i=a.n(c),o=(a(139),a(8)),l=a(65),s=(a(142),a(103)),u=a.n(s),m=Object(r.createContext)(null),p=a(14),d=a(236),g=a(237),f=a(238),h=a(43),y=a(228),E=a(24),x=a(115),b=a(235);function j(e){var t=n.a.useState(null),a=Object(o.a)(t,2),c=a[0],i=a[1],l=Object(r.useContext)(m),s=(l.user,l.setUser),u=l.setRaceURL,p=function(){i(null)};return n.a.createElement("div",null,n.a.createElement(y.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},color:"inherit",style:{borderRadius:"60px"}},n.a.createElement("img",{src:e.user.picture,style:{height:"45px",width:"45px",borderRadius:"100px"}})),n.a.createElement(x.a,{id:"simple-menu",anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:p},n.a.createElement(b.a,{onClick:p,component:E.a,to:"/profile"},"Profile"),n.a.createElement(b.a,{onClick:function(){localStorage.removeItem("user"),s(localStorage.getItem("user")),localStorage.removeItem("typerace.race"),u(localStorage.getItem("typerace.race")),i(null)}},"Logout")))}var v=Object(d.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function O(){var e=v(),t=Object(r.useContext)(m),a=t.user,c=t.setOpenLogin;return n.a.createElement("div",{className:e.root},n.a.createElement(g.a,{position:"static"},n.a.createElement(f.a,null,n.a.createElement(h.a,{variant:"h6",className:e.title},n.a.createElement(E.a,{color:"inherit",className:"navbar-link",to:"/home"},"Typerace")),a?n.a.createElement(j,{user:a}):n.a.createElement(y.a,{color:"inherit",onClick:function(){return c(!0)}},"Login"))))}var w=a(239),_=a(192);function S(e){var t=Object(r.useContext)(m),a=t.user,c=t.setUser,i=t.setRaceURL;return n.a.createElement("div",{className:"profile"},n.a.createElement(w.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-start"}," ",n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"center",alignItems:"center"},n.a.createElement("h1",null,"Your Profile")),n.a.createElement(w.a,{item:!0,xs:1,style:{height:"100%"}},n.a.createElement(y.a,{component:E.a,to:"/home",variant:"outlined",color:"secondary",className:"back-button",style:{marginTop:"20px"}},"Back")),n.a.createElement(w.a,{item:!0,xs:5,style:{height:"100%"}},n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"center",alignItems:"center"},n.a.createElement("img",{src:a.picture,style:{height:"150px",width:"150px",borderRadius:"100px"}}))," ",n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"center",alignItems:"center"},n.a.createElement("h2",null,a.full_name))),n.a.createElement(w.a,{item:!0,xs:6},n.a.createElement("h3",{style:{marginLeft:"20px"}},"Account details"),n.a.createElement(_.a,{variant:"outlined",style:{marginBottom:"30px"}},n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"flex-start",alignItems:"center"},n.a.createElement("div",{id:"list",style:{marginTop:"20px"}},n.a.createElement("strong",null,"Email:")," ",a.email)),n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"flex-start",alignItems:"center"},n.a.createElement("div",{id:"list"},n.a.createElement("strong",null,"Display name:")," ",a.display_name)))," ",n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"flex-start",alignItems:"center"},n.a.createElement("h3",{style:{marginLeft:"20px"}},"Statistics")),n.a.createElement(_.a,{variant:"outlined"},n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"flex-start",alignItems:"center"},n.a.createElement("div",{id:"list",style:{marginTop:"20px"}},n.a.createElement("strong",null,"Races:")," ",a.statistics.races)),n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"flex-start",alignItems:"center"},n.a.createElement("div",{id:"list"},n.a.createElement("strong",null,"Wins:")," ",a.statistics.wins)),n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"flex-start",alignItems:"center"},n.a.createElement("div",{id:"list"},n.a.createElement("strong",null,"Average WPM:")," ",Math.round(a.statistics.average_wpm))),n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"flex-start",alignItems:"center"},n.a.createElement("div",{id:"list"},n.a.createElement("strong",null,"Fastest WPM:")," ",a.statistics.fastest_wpm))," "),n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"center",alignItems:"center"},n.a.createElement(y.a,{onClick:function(){localStorage.removeItem("user"),c(localStorage.getItem("user")),localStorage.removeItem("typerace.race"),i(localStorage.getItem("typerace.race"))},component:E.a,to:"/home",variant:"outlined",color:"primary",className:"logout-button",style:{marginTop:"20px"}},"Logout")))))}var I=a(248),k=a(13),C=a.n(k),T=a(12),R=a(19),N=a(251),L=a(243),J=a(241),U=a(242),W=a(240),P=a(33),B=a.n(P);function D(e,t,a,r,n){e.auth().signInWithPopup(t).then(function(){var t=Object(R.a)(C.a.mark((function t(c){var i,o;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.auth().currentUser.getIdToken(!0);case 2:i=t.sent,o=c.additionalUserInfo.isNewUser,fetch("".concat(B.a,"login"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({idToken:i,newUser:o})}).then((function(e){return e.json()})).then((function(e){if(n(!1),o)e.display_name=e.full_name,r(!0);else{var t=new CustomEvent("login-result",{detail:{result:!0}});document.dispatchEvent(t)}a(e),localStorage.setItem("user",JSON.stringify(e))}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){var t=new CustomEvent("login-result",{detail:{result:!1}});document.dispatchEvent(t),console.log(e)}))}function M(e,t){return A.apply(this,arguments)}function A(){return(A=Object(R.a)(C.a.mark((function e(t,a){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(B.a,"update"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",authorization:t.token},body:JSON.stringify(Object(T.a)({},t))}).then((function(e){return e.json()})).then((function(e){return!!e.message&&(a(t),localStorage.setItem("user",JSON.stringify(t)),!0)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return z.apply(this,arguments)}function z(){return(z=Object(R.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(B.a,"update-race-data"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",authorization:t.token},body:JSON.stringify(Object(T.a)({},t))}).then((function(e){return e.json()})).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(R.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(B.a,"create"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:t}}).then((function(e){return e.json()})).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return F.apply(this,arguments)}function F(){return(F=Object(R.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(B.a,"new-paragraph"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:t}}).then((function(e){return e.json()})).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var K=(0,a(21).createBrowserHistory)({forceRefresh:!0});function q(e){var t=Object(r.useContext)(m),a=t.user,c=t.setUser,i=t.setRaceURL,l=Object(r.useState)(""),s=Object(o.a)(l,2),u=s[0],p=s[1],d=Object(r.useState)(""),g=Object(o.a)(d,2),f=g[0],h=g[1],E=function(){var t=Object(R.a)(C.a.mark((function t(){var r;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!u){t.next=5;break}return t.next=3,M(Object(T.a)(Object(T.a)({},a),{},{display_name:u}),c);case 3:t.sent?(e.setOpen(!1),(r=JSON.parse(localStorage.getItem("typerace.race")))&&r.race_uid&&(i({race_uid:r.race_uid,race_admin:""}),K.push("/race"))):h("Display name already exists");case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return n.a.createElement("div",null,n.a.createElement(N.a,{disableBackdropClick:!0,open:e.open||!1,"aria-labelledby":"form-dialog-title"},n.a.createElement(W.a,{id:"form-dialog-title"},"Display name"),n.a.createElement(J.a,null,n.a.createElement(U.a,null,"Please enter a display name to show while you're racing"),n.a.createElement("div",{className:"error"},f),n.a.createElement(I.a,{autoFocus:!0,margin:"dense",id:"display-name",label:"Display name",type:"text",fullWidth:!0,value:u,onChange:function(e){p(e.target.value)}})),n.a.createElement(L.a,null,n.a.createElement(y.a,{onClick:E,color:"primary"},"Submit"))))}var Q=a(50),V=a.n(Q),Z=a(107),$=a.n(Z),X=a(109),ee=a.n(X),te=a(108),ae=a.n(te);function re(e){var t=Object(r.useContext)(m),a=t.user,c=t.setRaceURL,i=t.raceURL,l=t.setOpenLogin,s=Object(r.useState)("home"),u=Object(o.a)(s,2),p=u[0],d=u[1],g=Object(r.useState)(""),f=Object(o.a)(g,2),h=f[0],x=f[1];Object(r.useEffect)((function(){i&&i.race_uid&&!a&&l(!0)}),[]);return n.a.createElement(w.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},"home"===p&&n.a.createElement(w.a,{item:!0,xs:5},n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"center",alignItems:"center",style:{marginTop:"70px",marginBottom:"60px"}},n.a.createElement("div",{className:"page-title"},"Welcome to Typerace!")," "),n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"center",alignItems:"center",style:{marginTop:"20px"}},n.a.createElement(y.a,{variant:"outlined",color:"primary",onClick:function(){a?function(e){return H.apply(this,arguments)}(a.token).then((function(e){e.message&&(c({race_uid:e.race_uid,race_admin:a.uid,paragraph:{paragraph:e.paragraph,word_count:e.word_count,char_count:e.char_count}}),localStorage.setItem("typerace.race",JSON.stringify({race_uid:e.race_uid,race_admin:a.uid,paragraph:{paragraph:e.paragraph,word_count:e.word_count,char_count:e.char_count}})),K.push("/race"))})):l(!0)},className:"home-button",style:{marginTop:"20px"}},n.a.createElement($.a,{style:{marginRight:"10px"}}),"Create race")),n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"center",alignItems:"center",style:{marginTop:"20px"}},n.a.createElement(y.a,{variant:"outlined",color:"primary",onClick:function(){return d("join")},className:"home-button"},n.a.createElement(ae.a,{style:{marginRight:"10px"}}),"Join race")),n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"center",alignItems:"center"},n.a.createElement(q,null)),a&&n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"center",alignItems:"center",style:{marginTop:"20px"}},n.a.createElement(y.a,{component:E.a,to:"/profile",variant:"outlined",color:"primary",className:"home-button"},n.a.createElement(ee.a,{style:{marginRight:"10px"}}),"Profile"))),"join"===p&&n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"center",alignItems:"center"},n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"center",alignItems:"center",style:{marginTop:"20px"}},n.a.createElement(I.a,{id:"standard-basic",label:"Link",onChange:function(e){var t=e.target.value;x(t)},value:h})),n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"center",alignItems:"center",style:{marginTop:"20px"}},n.a.createElement(y.a,{variant:"contained",color:"primary",onClick:function(){if(a){var e=V.a.parse(V.a.extract(h));e.race&&(c({race_uid:e.race,race_admin:""}),localStorage.setItem("typerace.race",JSON.stringify({race_uid:e.race,race_admin:""})),K.push("/race"))}else l(!0)}},"Join")," ",n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"center",alignItems:"center",style:{marginTop:"20px"}},n.a.createElement(y.a,{variant:"contained",color:"secondary",onClick:function(){return d("home")}},"Cancel")," "))))}var ne=a(247),ce=(a(190),a(66));function ie(e,t,a){e.emit(t,a)}var oe=a(234),le=a(193),se=a(245),ue=a(244),me=a(246),pe=a(111),de=a.n(pe),ge=a(112),fe=a.n(ge),he=a(250),ye=function(e){var t=Object(r.useState)(!1),a=Object(o.a)(t,2),c=(a[0],a[1]),i=e.bgcolor,l=e.completed,s=e.image,u={height:"100%",width:"".concat(l,"%"),backgroundColor:i,borderRadius:"inherit",textAlign:"right"};return n.a.createElement("div",{style:{height:15,width:"100%",backgroundColor:"#e0e0de",borderRadius:30}},n.a.createElement("div",{style:u,id:"filler-progress-bar"},n.a.createElement("span",{style:{color:"white",fontWeight:"bold"}},n.a.createElement("img",{src:s,referrerPolicy:"no-referrer",style:{height:"23px",width:"23px",borderRadius:"60px",position:"relative",bottom:"4px"},onLoad:function(){c(!0)},alt:"A"}))))};function Ee(e){var t=Object(r.useContext)(m),a=t.raceURL,c=t.user,i=t.socket,l=t.setRaceURL,s=t.setUser,u=Object(r.useState)(!1),p=Object(o.a)(u,2),d=p[0],g=p[1],f=Object(r.useState)(4),h=Object(o.a)(f,2),E=h[0],x=h[1],b=Object(r.useState)({timer:119,countdown:4}),j=Object(o.a)(b,1)[0],v=Object(r.useState)(119),O=Object(o.a)(v,2),S=O[0],I=O[1],k=Object(r.useState)(0),N=Object(o.a)(k,2),L=N[0],J=N[1],U=Object(r.useState)(""),W=Object(o.a)(U,2),P=W[0],B=W[1],D=Object(r.useState)(!1),M=Object(o.a)(D,2),A=M[0],z=M[1],H=Object(r.useState)("#006400"),F=Object(o.a)(H,2),q=F[0],Q=F[1],V=Object(r.useState)("#90EE90"),Z=Object(o.a)(V,2),$=Z[0],X=Z[1],ee=Object(r.useState)(0),te=Object(o.a)(ee,2),ae=te[0],re=te[1],pe=Object(r.useState)(0),ge=Object(o.a)(pe,2),Ee=ge[0],xe=ge[1],be=Object(r.useState)([]),je=Object(o.a)(be,2),ve=je[0],Oe=je[1],we=Object(r.useState)([]),_e=Object(o.a)(we,2),Se=_e[0],Ie=_e[1],ke=Object(r.useState)([]),Ce=Object(o.a)(ke,2),Te=Ce[0],Re=Ce[1],Ne=Object(r.useState)("Copy"),Le=Object(o.a)(Ne,2),Je=Le[0],Ue=Le[1],We=Object(r.useState)(["","",""]),Pe=Object(o.a)(We,2),Be=Pe[0],De=Pe[1],Me=Object(r.useState)(-1),Ae=Object(o.a)(Me,2),Ge=Ae[0],ze=Ae[1],He=Object(r.useState)({done:"",current:"",coming:a.paragraph&&a.paragraph.paragraph}),Ye=Object(o.a)(He,2),Fe=Ye[0],Ke=Ye[1];Object(r.useEffect)((function(){return window.addEventListener("beforeunload",(function(e){i.emit("remove-player",Object(T.a)({race_uid:a.race_uid,uid:c.uid},JSON.parse(localStorage.getItem("typerace.race")))),localStorage.removeItem("typerace.race")})),performance.navigation.type===performance.navigation.TYPE_RELOAD?(i.emit("remove-player",Object(T.a)({race_uid:a.race_uid,uid:c.uid},JSON.parse(localStorage.getItem("typerace.race")))),localStorage.removeItem("typerace.race"),void K.push("/home")):c?(ie(i,"join-race",{race_admin:a.race_admin,token:c.token,race_uid:a.race_uid,display_name:c.display_name,paragraph:a.paragraph,image:c.picture}),i.on("new-user-request",(function(e){a.race_admin===c.uid&&ie(i,"new-user-request-granted",Object(T.a)(Object(T.a)({},e),JSON.parse(localStorage.getItem("typerace.race"))))})),i.on("connectToRoom",(function(e){l(Object(T.a)({},e)),localStorage.setItem("typerace.race",JSON.stringify(Object(T.a)({},e)))})),document.getElementById("race-input").onpaste=function(e){return e.preventDefault(),!1},i.on("remove-player-client",(function(e){if("error"===e||e.kick&&e.uid===c.uid)return localStorage.removeItem("typerace.race"),K.push("/home"),void(e.kick&&alert("You have been kicked"));var t={current_users:e.current_users,paragraph:e.paragraph,race_uid:e.race_uid,race_admin:e.race_admin};l(t),localStorage.setItem("typerace.race",JSON.stringify(t))})),i.on("start-countdown-client",(function(e){e.current_racers.forEach((function(e){e.display_name===c.display_name&&ze(e.index)})),e.paragraph&&l(Object(T.a)(Object(T.a)({},a),{},{paragraph:e.paragraph,current_users:e.current_racers})),Ie([]),I(j.timer),x(j.countdown),J(0),B(""),z(!1),xe(0),Oe(e.current_racers),Re(JSON.parse(localStorage.getItem("typerace.race")).current_users&&Object(ce.a)(JSON.parse(localStorage.getItem("typerace.race")).current_users));var t=Date.now(),r=setInterval((function(){var e=Date.now()-t,a=Math.floor(e/1e3%60);E-a===3&&De(["red","",""]),E-a===2&&De(["red","yellow",""]),E-a===1&&(g(!0),De(["red","yellow","green"])),E-a===0&&clearInterval(r),x(E-a)}),1e3)})),function(){i.emit("remove-player",Object(T.a)({race_uid:a.race_uid,uid:c.uid},JSON.parse(localStorage.getItem("typerace.race")))),localStorage.removeItem("typerace.race")}):void K.push("/home")}),[]),Object(r.useEffect)((function(){return i.on("update-client-wpm",(function(e){var t=Object(ce.a)(ve);t[e.index]={wpm:e.wpm,correctWords:e.correctWords,image:e.image,race_uid:a.race_uid,index:e.index,display_name:e.display_name,uid:e.uid},Oe(t)})),function(){i.off("update-client-wpm")}}),[ve]),Object(r.useEffect)((function(){Ke({done:"",current:"",coming:a.paragraph&&a.paragraph.paragraph})}),[a.paragraph]),Object(r.useEffect)((function(){"Copied!"===Je&&setTimeout((function(){Ue("Copy")}),2e3)}),[Je]),Object(r.useEffect)((function(){return i.on("completed-race-client",(function(e){Se.includes(e)||Ie([].concat(Object(ce.a)(Se),[e]))})),Se.length>0&&Se.forEach((function(e,t){document.getElementById("rank-".concat(e)).innerHTML="rank "+(t+1)})),d&&Te&&Te.length===Se.length&&(Object(R.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G({race_uid:a.race_uid,uid:c.uid,wpm:Ee,token:c.token,rank:Se.indexOf(c.display_name)+1});case 2:t=e.sent,s(Object(T.a)(Object(T.a)({},c),{},{statistics:Object(T.a)({},t)})),localStorage.setItem("user",JSON.stringify(Object(T.a)(Object(T.a)({},c),{},{statistics:Object(T.a)({},t)})));case 5:case"end":return e.stop()}}),e)})))(),g(!1)),function(){i.off("completed-race-client")}}),[Se,Te]),Object(r.useEffect)((function(){if(d&&!A){var e=Date.now();re(setInterval((function(){var t=Date.now()-e,a=Math.floor(t/1e3%120);S-a===0&&(z(!0),clearInterval(ae)),I(S-a)}),1e3))}}),[d,A]),Object(r.useEffect)((function(){if(A){clearInterval(ae),i.emit("completed-race",{race_uid:a.race_uid,display_name:c.display_name});var e=j.timer-S,t=Math.round(L/e*60);xe(t),i.emit("update-wpm",{wpm:t,correctWords:L,image:c.picture,race_uid:a.race_uid,index:Ge,display_name:c.display_name,uid:c.uid})}}),[A]),Object(r.useEffect)((function(){var e=j.timer-S,t=Math.round(L/e*60);xe(t),i.emit("update-wpm",{wpm:t,correctWords:L,image:c.picture,race_uid:a.race_uid,index:Ge,display_name:c.display_name,uid:c.uid})}),[S]);var qe=function(){var e=Object(R.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,!(Se.length>0)){e.next=10;break}return e.next=4,Y();case 4:if(!(t=e.sent).error){e.next=9;break}return e.abrupt("return");case 9:delete t.message;case 10:i.emit("start-countdown",{race_uid:a.race_uid,users:a.current_users,paragraph:t});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Qe=function(e){return n.a.createElement(w.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",key:e.display_name},n.a.createElement(w.a,{item:!0,xs:3},n.a.createElement("div",{style:{width:"100%"}},e.display_name)," "),n.a.createElement(w.a,{item:!0,xs:7,style:{paddingTop:"5px"}},n.a.createElement(w.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",style:{height:"20px"}},n.a.createElement(ye,{bgcolor:"#3f51b5",completed:Math.round(ve[e.index].correctWords/(a.paragraph&&a.paragraph.word_count)*100)||0,image:ve[e.index].image})," ")),n.a.createElement(w.a,{item:!0,xs:2},n.a.createElement("div",{style:{width:"100%",marginLeft:"10px"}},ve[e.index].wpm," wpm"," ",n.a.createElement("span",{id:"rank-".concat(e.display_name)})," ")))};return n.a.createElement("div",null,c&&n.a.createElement(w.a,{container:!0,direction:"row",justify:"center"},n.a.createElement(w.a,{item:!0,xs:12},n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"center",alignItems:"center",className:"page-title",style:{marginTop:"30px"}},"Welcome to the race lobby"),n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"center",alignItems:"center",style:{marginTop:"20px"}},d?n.a.createElement("span",{style:{color:"white"}},"h"):a.race_admin===c.uid?n.a.createElement("div",null,'You are the race admin. Click on "Start race" to begin'):n.a.createElement("div",null,"Waiting for race admin to start the race"))),n.a.createElement(w.a,{item:!0,xs:2},"Racers",a.current_users&&n.a.createElement(_.a,{variant:"outlined",elevation:0,style:{marginTop:"10px"},className:"race-room-paper"},n.a.createElement(oe.a,null,a.current_users.map((function(e){return n.a.createElement(le.a,{key:e.uid},n.a.createElement("img",{src:e.image,style:{height:"30px",width:"30px",borderRadius:"100px",marginRight:"4px"}}),n.a.createElement(ue.a,{primary:e.display_name}),n.a.createElement(se.a,null,a.race_admin===c.uid&&c.display_name!==e.display_name&&n.a.createElement(he.a,{title:"Kick"},n.a.createElement(me.a,{"aria-label":"delete",onClick:function(){return function(e){i.emit("remove-player",Object(T.a)({race_uid:a.race_uid,uid:e.uid,kick:!0},JSON.parse(localStorage.getItem("typerace.race"))))}(e)}},n.a.createElement(de.a,null)))))}))))),n.a.createElement(w.a,{item:!0,xs:8,style:{marginTop:"10px"}},n.a.createElement(ne.a,null,n.a.createElement(_.a,{variant:"outlined",elevation:0,style:{marginTop:"20px"},className:"race-room-paper"},n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"center",alignItems:"center"},n.a.createElement("div",{style:{width:"90%",margin:"10px 0px",lineHeight:"30px"}},Se.length>0||d||E<=2?ve.map((function(e){return Qe(e)})):a.current_users&&a.current_users.map((function(e){return n.a.createElement("div",{key:e.uid},e.display_name," ",n.a.createElement("span",{id:"rank-".concat(e.display_name)}))}))))),n.a.createElement(w.a,{container:!0,itemxs:12,direction:"row",justify:"center",alignItems:"center",style:{margin:"10px 0px"}},n.a.createElement("div",null,n.a.createElement("span",{style:{marginRight:"10px"}},"Time\xa0","  ",Math.floor(S%3600/60),":",Math.floor(S%3600%60)<10?"0"+Math.floor(S%3600%60):Math.floor(S%3600%60)),n.a.createElement("span",{style:{borderLeft:"1px solid grey",height:"5px",marginRight:"10px"}}),n.a.createElement("span",null,"Speed ","  "," ",Ee||0," wpm"))),n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"center",alignItems:"center",style:{marginTop:"20px"}},n.a.createElement(_.a,{variant:"outlined",elevation:0,className:"race-room-paper"},n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"center",alignItems:"center",style:{marginTop:"10px",marginBottom:"10px"}},n.a.createElement("div",{style:{width:"90%",lineHeight:"30px"}},n.a.createElement("span",{style:{color:"gray",backgroundColor:$}},Fe.done),n.a.createElement("span",{style:{color:q}},Fe.current&&Fe.current),n.a.createElement("span",null,Fe.coming))))),n.a.createElement(w.a,{container:!0,itemxs:12,direction:"row",justify:"center",alignItems:"center",style:{margin:"10px 0px"}},n.a.createElement(n.a.Fragment,null,Be.map((function(e,t){return n.a.createElement("div",{key:t,style:{width:"20px",height:"20px",border:"1px solid black",borderRadius:"60px",display:"inline",marginRight:"5px",backgroundColor:e}})})))),n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"center",alignItems:"center"},n.a.createElement("input",{id:"race-input",style:{width:"100%",height:"50px",borderRadius:"4px",borderStlye:"solid",padding:"0px 20px",outlineColor:q},autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",onChange:function(e){if(!A&&d){var t=e.target.value,r=t.length;if(a.paragraph.paragraph.slice(0,r)!==t)Q("red"),X("#FA8072"),De(["red","red","red"]),B(t);else{if(P.length>t.length&&"#006400"===q)return;Ke({done:t,current:a.paragraph.paragraph[r],coming:a.paragraph.paragraph.slice(r+1,a.paragraph.paragraph.length)})," "===t[r-1]&&"#006400"===q&&r-2>=0&&" "!==t[r-2]&&J(L+1),t===a.paragraph.paragraph&&(J(L+1),z(!0)),De(["green","green","green"]),X("#90EE90"),Q("#006400"),B(t)}}},value:P})),a.race_admin===c.uid&&!d&&n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"flex-end",alignItems:"flex-end",style:{marginTop:"20px"}},a.current_users&&1===a.current_users.length?n.a.createElement("span",null,"Waiting for more players to join..."):n.a.createElement(y.a,{variant:"outlined",color:"secondary",onClick:qe,className:"start-race-button"},(Se.length,n.a.createElement("span",null,"Start new race")))))),n.a.createElement(w.a,{item:!0,xs:2},n.a.createElement(_.a,{variant:"outlined",elevation:0,style:{marginTop:"30px",padding:"5px"},className:"race-room-paper"},"send the following link to your friends to join the race!"," ",n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"center",alignItems:"center"},n.a.createElement("input",{id:"race-link",value:"".concat(window.location.origin,"/?race=")+a.race_uid,style:{marginTop:"5px",marginBottom:"5px"},readOnly:!0}),n.a.createElement("div",null,n.a.createElement(he.a,{title:Je},n.a.createElement(me.a,{"aria-label":"copy",onClick:function(){var e=document.getElementById("race-link");e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),Ue("Copied!")}},n.a.createElement(fe.a,null)))))))))}var xe=a(114),be=a.n(xe),je=a(113),ve=a.n(je);function Oe(e){var t=Object(r.useContext)(m),a=t.setUser,c=t.setRaceURL,i=t.openLogin,o=t.setOpenLogin,l=t.setOpenDialog,s=function(){var t=Object(R.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.addEventListener("login-result",(function(e){if(e.detail.result){var t=JSON.parse(localStorage.getItem("typerace.race"));t&&t.race_uid&&(c({race_uid:t.race_uid,race_admin:""}),K.push("/race"))}})),D(e.firebase,e.provider,a,l,o);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return n.a.createElement("div",null,n.a.createElement(N.a,{disableBackdropClick:!0,open:i||!1,"aria-labelledby":"form-dialog-title"},n.a.createElement("div",{style:{width:"300px",height:"200px"}}," ",n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"flex-end",alignItems:"flex-end"},n.a.createElement(me.a,{"aria-label":"close",onClick:function(){return o(!1)},style:{padding:"5px"}},n.a.createElement(be.a,null))),n.a.createElement(W.a,{id:"form-dialog-title",style:{padding:"6px",paddingLeft:"12px"}},"Login"),n.a.createElement(J.a,null,n.a.createElement(U.a,null,n.a.createElement(w.a,{item:!0,xs:12,container:!0,direction:"row",justify:"center",alignItems:"center"},n.a.createElement("button",{id:"google-login-button",onClick:s},n.a.createElement("img",{src:ve.a,id:"google-login-image",alt:"G"}),n.a.createElement("div",{id:"google-login-text"},"LOGIN WITH GOOGLE"))))))))}var we=u()(B.a);l.initializeApp({apiKey:"AIzaSyCvTmQCl8kmkDHDtzeZs1WR-tC7oJKeiOY",authDomain:"typerace-292d4.firebaseapp.com",databaseURL:"https://typerace-292d4.firebaseio.com",projectId:"typerace-292d4",storageBucket:"typerace-292d4.appspot.com",messagingSenderId:"174094638023",appId:"1:174094638023:web:5a768e07aa3c3a7872d7e2",measurementId:"G-GKP8GJ381V"});var _e=new l.auth.GoogleAuthProvider;function Se(){var e=Object(r.useState)(JSON.parse(localStorage.getItem("user"))),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)(JSON.parse(localStorage.getItem("typerace.race"))),s=Object(o.a)(i,2),u=s[0],d=s[1],g=Object(r.useState)(!1),f=Object(o.a)(g,2),h=f[0],y=f[1],E=Object(r.useState)(!1),x=Object(o.a)(E,2),b=x[0],j=x[1];return Object(r.useEffect)((function(){var e=V.a.parse(window.location.search);e.race&&(d({race_uid:e.race,race_admin:""}),localStorage.setItem("typerace.race",JSON.stringify({race_uid:e.race,race_admin:""})),K.push("/race"))}),[]),n.a.createElement(p.b,{history:K},n.a.createElement(m.Provider,{value:{user:a,setUser:c,raceURL:u,setRaceURL:d,socket:we,openLogin:h,setOpenLogin:y,openDialog:b,setOpenDialog:j}},n.a.createElement(O,null),b&&n.a.createElement(q,{open:b,setOpen:j}),h&&n.a.createElement(Oe,{provider:_e,firebase:l}),n.a.createElement("div",{id:"body"},n.a.createElement(ne.a,null,n.a.createElement(p.c,null,n.a.createElement(p.a,{exact:!0,path:"/profile"},a?n.a.createElement(S,null):n.a.createElement("div",null,"Please login to view your profile")),n.a.createElement(p.a,{exact:!0,path:"/race"},u?n.a.createElement(Ee,null):n.a.createElement("div",null,"Please enter a race url")),n.a.createElement(p.a,{path:"/"},n.a.createElement(re,null)))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(Se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},33:function(e,t){e.exports="https://radiant-ravine-82260.herokuapp.com/"}},[[134,1,2]]]);
//# sourceMappingURL=main.6070ca76.chunk.js.map